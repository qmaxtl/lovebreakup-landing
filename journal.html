<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Your Healing Journal</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-pink-50 text-gray-800 font-sans">

  <!-- Header -->
  <header class="bg-pink-600 text-white p-4 flex justify-between items-center shadow-md sticky top-0 z-50">
    <!-- Left Title -->
    <div class="text-lg font-bold tracking-wide">ğŸ““ Breakup Journal</div>

    <!-- Right Nav -->
    <nav class="space-x-6 text-lg font-medium flex items-center" id="user-status-container">
      <!-- Firebase injected -->
    </nav>
  </header>

  <!-- Journal Section -->
  <main class="max-w-2xl mx-auto mt-12 bg-white p-8 rounded-2xl shadow-lg">
    <h2 class="text-2xl font-bold text-center text-pink-600 mb-6">ğŸ““ Write what's on your heart today</h2>
    <textarea id="journalInput" placeholder="Dear AI Journal, today I feel..." class="w-full h-48 p-4 border border-gray-300 rounded-lg mb-4 resize-y"></textarea>
    <button onclick="saveEntry()" class="bg-pink-600 text-white px-6 py-2 rounded-lg hover:bg-pink-700 transition">Save Entry</button>
    <div id="output" class="mt-6 bg-pink-50 border-l-4 border-pink-500 p-4 rounded-lg text-gray-700 whitespace-pre-wrap hidden"></div>
  </main>

  <!-- Firebase Auth -->
  <script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-auth.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyA--L9O0Y2niM-90QibLEGesUpLUWAe2n4",
      authDomain: "lovebreakup-52bac.firebaseapp.com",
      projectId: "lovebreakup-52bac",
      storageBucket: "lovebreakup-52bac.appspot.com",
      messagingSenderId: "367547931480",
      appId: "1:367547931480:web:65dad44e077d93d093632d"
    };

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();

    auth.onAuthStateChanged(function(user) {
      const userStatusContainer = document.getElementById('user-status-container');
      userStatusContainer.innerHTML = '';

      if (user) {
        const username = user.email.split('@')[0];
        userStatusContainer.innerHTML = `
          <a href="index.html" class="hover:underline">Home</a>
          <span class="mx-2">|</span>
          <span class="hidden sm:inline">Welcome, ${username}</span>
          <a href="#" onclick="logoutUser()" class="hover:underline ml-4">Logout</a>
        `;
      } else {
        userStatusContainer.innerHTML = `
          <a href="index.html" class="hover:underline">Home</a>
          <a href="login.html" class="hover:underline ml-6">Login</a>
        `;
      }
    });

    function logoutUser() {
      auth.signOut().then(() => {
        window.location.href = 'index.html';
      }).catch((error) => console.error("Sign out error", error));
    }
  </script>

  <!-- Journal Save Logic -->
  <script>
    function saveEntry() {
      const input = document.getElementById('journalInput').value.trim();
      const output = document.getElementById('output');

      if (input) {
        output.classList.remove('hidden');
        output.textContent = `ğŸ“ Journal Entry:\n\n${input}`;
        document.getElementById('journalInput').value = '';
      }
    }
  </script>
</body>
</html>
